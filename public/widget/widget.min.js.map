{"version":3,"names":["scriptOrigin","scripts","document","getElementsByTagName","i","length","src","includes","URL","origin","window","location","getScriptOrigin","config","widgetId","apiUrl","configUrl","position","primaryColor","textColor","greeting","placeholder","title","subtitle","offlineMessage","storageKey","maxHistoryLength","avatarType","avatarIcon","avatarUrl","showBranding","CSAIConfig","isOpen","isLoading","chatHistory","sessionId","generateSessionId","Math","random","toString","substr","Date","now","adjustColor","color","amount","hex","replace","num","parseInt","min","max","slice","createWidget","widget","createElement","className","id","innerHTML","icons","robot","support","user","getAvatarHtml","body","appendChild","addMessage","role","content","skipHistory","messagesEl","getElementById","messageEl","text","placeholders","match","push","code","substring","parseMarkdown","textContent","scrollTop","scrollHeight","localStorage","setItem","JSON","stringify","history","e","console","warn","saveHistory","hideTyping","typingEl","remove","async","sendMessage","message","trim","sendBtn","disabled","showTyping","response","fetch","method","headers","map","m","data","json","success","error","toggleChat","windowEl","buttonEl","classList","add","focus","setTimeout","init","userConfig","ok","serverConfig","fetchConfig","stored","getItem","parse","loadHistory","styles","styleEl","head","injectStyles","toggleBtn","closeBtn","inputEl","addEventListener","value","style","height","key","shiftKey","preventDefault","initEventListeners","forEach","msg","log","readyState"],"sources":["public/widget/widget.js"],"mappings":"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","ignoreList":[]}