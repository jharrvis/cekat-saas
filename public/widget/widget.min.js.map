{"version":3,"names":["scriptOrigin","scripts","document","getElementsByTagName","i","length","src","includes","URL","origin","e","console","warn","window","location","getScriptOrigin","config","widgetId","apiUrl","configUrl","position","primaryColor","textColor","greeting","placeholder","title","subtitle","offlineMessage","storageKey","maxHistoryLength","avatarType","avatarIcon","avatarUrl","showBranding","CSAIConfig","isOpen","isLoading","chatHistory","sessionId","generateSessionId","Math","random","toString","substr","Date","now","adjustColor","color","amount","hex","replace","num","parseInt","min","max","slice","createWidget","widget","createElement","className","id","innerHTML","icons","robot","support","user","getAvatarHtml","body","appendChild","addMessage","role","content","skipHistory","messagesEl","getElementById","messageEl","text","placeholders","match","push","code","substring","parseMarkdown","textContent","scrollTop","scrollHeight","localStorage","setItem","JSON","stringify","history","saveHistory","hideTyping","typingEl","remove","async","sendMessage","message","trim","sendBtn","disabled","showTyping","response","fetch","method","headers","map","m","data","json","success","error","toggleChat","windowEl","buttonEl","classList","add","focus","setTimeout","init","userConfig","ok","serverConfig","fetchConfig","stored","getItem","parse","loadHistory","styles","styleEl","head","injectStyles","toggleBtn","closeBtn","inputEl","addEventListener","value","style","height","key","shiftKey","preventDefault","initEventListeners","forEach","msg","log","readyState"],"sources":["public/widget/widget.js"],"mappings":"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","ignoreList":[]}